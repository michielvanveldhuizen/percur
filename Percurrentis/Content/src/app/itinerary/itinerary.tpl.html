<div id="itinerary" data-ng-controller="itineraryDetailCtrl">
    <div class="block">
        <div class="block-title">
            <h4>Travel Details</h4>

        </div>
        <div class="row">
            <div class="col-md-6">
                <span><strong>Departure: </strong>{{ request.DepartureDate|date:'EEEE d MMMM yyyy - H:mm'}}</span><br />
                <span><strong>Return: </strong>{{ request.ReturnDate|date:'EEEE d MMMM yyyy - H:mm'}}</span>
                <div><strong>Traveler<span ng-show="request.RequestTravellers.length > 1">s</span>:</strong></div>

                <div class="table">
                    <table class="table table-vcenter table-condensed table-striped">
                        <tbody>
                            <tr data-ng-repeat="traveller in request.RequestTravellers">
                                <td>{{index !== 0 ? $index+1 : ''}} {{ index }}</td>
                                <td>{{traveller.FullName || 'No full name given.'}}</td>
                                <td>{{traveller.PhoneNumberID || 'No number given.'}}</td>
                                <td>{{traveller.Company.Name || 'No company specified.' }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <ul class="list-group">
                    <li class="list-group-item"><strong>Requester: </strong> {{ request.ApplicantID }}</li>
                    <li class="list-group-item"><strong>Supervisor: </strong> {{ supervisorName }}<br />
                    <li class="list-group-item">
                        <strong>Status: </strong>
                        <span class="label label-warning" data-ng-show="request.IsApproved == 0 && request.IsFinal == false">Awaiting</span>
                        <span class="label label-danger" data-ng-show="request.IsApproved == 1 && request.IsFinal == false">Rejected</span>
                        <span class="label label-success" data-ng-show="request.IsApproved == 2 && request.IsFinal == false">Approved</span>
                        <span class="label label-default" data-ng-show="request.IsFinal == true">Committed</span>
                    </li>
                    <li class="list-group-item"><strong>Purpose: </strong>{{ request.Purpose }}</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="block" data-ng-show="request.FlightRequests.length > 0">
        <div class="block-title">

            <h4><i class="fa fa-plane"></i> Flight Request Details</h4>
            <span class="pull-right" style="padding-top: 7.5px; padding-right: 15px">
                <button class="btn btn-sm btn-success" data-ng-show="editInProgress == false" data-ng-click="AddRequest()">Add</button>
                <button class="btn btn-sm btn-success" data-ng-show="editInProgress == true" data-ng-click="AddRequest()">Save</button>
            </span>
        </div>
        <div class="table" name="hoi">
            <table class="table table-vcenter table-condensed table-striped">
                <thead>
                    <tr>
                        <td>From</td>
                        <td>To</td>
                        <td>Date</td>
                        <td>Time</td>
                        <td>Large Cabin Luggage</td>
                        <td>Equipment</td>
                        <td>Check-in</td>
                        <td>Airline</td>
                        <td>Card</td>
                        <td>Price Euro</td>
                        <td>Price RON</td>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="flightreq in request.FlightRequests">
                        <td> {{ flightreq.DepartureAddress.City }}</td>
                        <td> {{ flightreq.DestinationAddress.City }}</td>
                        <td>
                            <span editable-bsdate="flightreq.DepartureDate" e-name="sDate" e-form="rowform" e-datepicker-popup="dd-MM-yy" e-required>
                                {{ flightreq.DepartureDate | date:'d MMMM yyyy' }}
                            </span>
                        </td>
                        <td> {{ flightreq.DepartureDate | date:'H:mm' }}</td>
                        <td>
                            {{ flightreq.HasLargeCabinLuggage == true ? "Yes" : "No" }}
                            <span data-ng-show="flightreq.HasLargeCabinLuggage == true"> ({{ flightreq.LargeLuggageCount }})</span>
                        </td>
                        <td>{{ flightreq.HasSpecialEquipment == true ? "Yes" : "No" }}</td>
                        <td>{{ flightreq.IsOnlineCheckIn == true ? "Online" : "Regular" }}</td>
                        <td>{{ flightreq.Airline }}</td>
                        <td>{{ flightreq.FlyerMemberCard.FMCNumber }}</td>
                        <td class="cost">{{ flightreq.Cost | number : 2 }}</td>
                        <td class="roncost">{{ toRON(flightreq.Cost) }}</td>
                    </tr>
                </tbody>
            </table>
            <div ng-show="editInProgress == true" data-ng-include src="'Content/src/app/itinerary/dingen.html'"></div>
        </div>
    </div>
    <div class="block" data-ng-show="request.FerryRequests.length > 0">
        <div class="block-title">
            <h4>Ferry Request Details</h4>
        </div>
        <div class="table">
            <table class="table table-vcenter table-condensed table-striped">
                <thead>
                    <tr>
                        <td>From</td>
                        <td>To</td>
                        <td>Date</td>
                        <td>Time</td>
                        <td>Car</td>
                        <td>Carsize (h / w)</td>
                        <td>Price</td>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="ferryreq in request.FerryRequests">
                        <td>{{ ferryreq.DepartureAddress.AddressName }}</td>
                        <td>{{ ferryreq.DestinationAddress.AddressName }}</td>
                        <td>{{ ferryreq.DepartureDate|date:'d MMMM yyyy' }}</td>
                        <td>{{ ferryreq.DepartureDate|date:'H:mm' }}</td>
                        <td>{{ ferryreq.LicensePlate != null ? ferryreq.LicensePlate : "No" }}</td>
                        <td>{{ ferryreq.LicensePlate != null ? ferryreq.CarHeight + " / " + ferryreq.CarHeight : "Not applicable" }}</td>
                        <td class="cost">{{ ferryreq.Cost | number : 2 }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="block" data-ng-show="request.Accommodations.length > 0">
        <div class="block-title">
            <h4>Accommodation Details</h4>
            <span class="pull-right" style="padding-top: 7.5px; padding-right: 15px"></span>
        </div>
        <div class="table">
            <table class="table table-vcenter table-condensed table-striped">
                <thead>
                    <tr>
                        <td>Check-in Date</td>
                        <td>Check-out Date</td>
                        <td>Total stay</td>
                        <td>Price</td>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="accomreq in request.Accommodations">
                        <td>{{ accomreq.CheckInDate | date:'d MMMM yyyy' }}</td>
                        <td>{{ accomreq.CheckOutDate | date:'d MMMM yyyy' }}</td>
                        <td>{{ CalculateStayDuration(accomreq.CheckInDate, accomreq.CheckOutDate) }} days</td>
                        <td class="cost">{{ accomreq.Cost | number : 2 }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="block" data-ng-show="request.TaxiRequests.length > 0">
        <div class="block-title">
            <h4>Taxi Request Details</h4>
            <span class="pull-right" style="padding-top: 7.5px; padding-right: 15px"></span>
        </div>
        <div class="table">
            <table class="table table-vcenter table-condensed">
                <thead>
                    <tr>
                        <td>From</td>
                        <td>To</td>
                        <td>Date</td>
                        <td>Time</td>
                        <td>Price</td>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="taxireq in request.TaxiRequests">
                        <td>
                            <strong>{{ taxireq.DepartureAddress.AddressName }}</strong><br>
                            {{ taxireq.DepartureAddress.Street }}<br>
                            {{ taxireq.DepartureAddress.City }}, {{ taxireq.DepartureAddress.PostalCode }}<br>
                        </td>
                        <td>
                            <strong>{{ taxireq.DestinationAddress.AddressName }}</strong><br>
                            {{ taxireq.DestinationAddress.Street }}<br>
                            {{ taxireq.DestinationAddress.City }}, {{ taxireq.DestinationAddress.PostalCode }}<br>
                        </td>
                        <td>{{ taxireq.DepartureDate|date:'d MMMM yyyy' }}</td>
                        <td>{{ taxireq.DepartureDate|date:'H:mm' }}</td>
                        <td class="cost">{{ taxireq.Cost }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="block" data-ng-show="request.TaxiRequests.length > 0">
        <div class="block-title">
            <h4>Rentalcar Request Details</h4>
        </div>
        <div class="table">
            <table class="table table-vcenter table-condensed table-striped">
                <thead>
                    <tr>
                        <td>StartDate</td>
                        <td>EndDate</td>
                        <td>Driver</td>
                        <td>Phonenumber</td>
                        <td>Price</td>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="rcarreq in request.RentalCarRequests">
                        <td>{{ rcarreq.StartDate|date:'d MMMM yyyy' }}</td>
                        <td>{{ rcarreq.EndDate|date:'d MMMM yyyy' }}</td>
                        <td>{{ rcarreq.Driver.FullName }}</td>
                        <td>{{ rcarreq.Driver.PhoneNumberID }}</td>
                        <td class="cost">{{ rcarreq.Cost }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="block" data-ng-show="request.EuroTunnelRequests.length > 0">
        <div class="block-title">
            <h4>EuroTunnel Request Details</h4>
        </div>
        <div class="table">
            <table class="table table-vcenter table-condensed table-striped">
                <thead>
                    <tr>
                        <td>From</td>
                        <td>To</td>
                        <td>Departure Date</td>
                        <td>License Plate</td>
                        <td>Price</td>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="euroreq in request.EuroTunnelRequests">
                        <td>{{ euroreq.DepartureAddress.AddressName }}</td>
                        <td>{{ euroreq.DestinationAddress.AddressName }}</td>
                        <td>{{ euroreq.DepartureDate|date:'d MMMM yyyy' }}</td>
                        <td>{{ euroreq.LicensePlate != null ? euroreq.LicensePlate : "No car"  }}</td>
                        <td class="cost">{{ euroreq.Cost }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="block" style="text-align: right; padding-bottom: 15px;">
        <button data-ng-show="request.IsFinal == false && request.IsApproved == 2" class="btn btn-sm btn-default pull-left" data-ng-click="CommitItinerary()">Commit Itinerary</button>
        <strong>Total price:</strong>{{ totalPrice  | number : 2 }}
    </div>
    <!--<button id="ignorePDF" ng-click="print()">Print</button>-->
</div>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-latest.min.js"
            type="text/javascript"></script>
    <style type="text/css">

        .box{-webkit-transition:background 1s;
-moz-transition:background 1s;
-o-transition:background 1s;
transition:background 1s}


    </style>
</head>
<body>
    <script type="text/javascript">
        $(document).ready(function () {
            var numOfBoxes = 100;

            for (var x = 0; x < numOfBoxes; x++) {
                //$("#mainDiv").append("<div id='box" + x + "' class='box' dataId='" + x + "'>" + x + "</div>");
                $("#mainDiv").append("<div id='box" + x + "' class='box' dataId='" + x + "'></div>");
            }
            
            $(".box").css("")
            $(".box").css("width", "25px");
            $(".box").css("height", "25px");
            $(".box").css("border", "1px solid #000");
            $(".box").css("position", "relative");
            $(".box").css("float", "left");

            var xAs = 0;
            var yAs = 0;

            var alreadyDidList = [];

            for (var x = 0; x < numOfBoxes; x++) {
                if (xAs == 10) {
                    xAs = 0;
                    yAs++;
                }
                //$("#box" + x).css("margin-left", (xAs * 30) + "px");
                //$("#box" + x).css("margin-top", (yAs * 30) + "px");
                xAs++;
            }

            function microtime(get_as_float) {
                var now = new Date()
                  .getTime() / 1000;
                var s = parseInt(now, 10);

                return (get_as_float) ? now : (Math.round((now - s) * 1000) / 1000) + ' ' + s;
            }
            
            var colorArray = ["rgb(200,0,0)", "rgb(0,200,0)", "rgb(0,0,200)", "rgb(32,32,32)", "rgb(225,225,225)", "rgb(102,102,102)", "rgb(4,3,2)"]

            $(".box").on("click", function () {
                var id = this.id.split("x");
                id = id[1];
                var colorNow = $("#box" + id).css("background-color");
                var microTime = microtime(true);
                
                var color = colorArray[Math.floor(Math.random() * 7)];
                
                while (colorNow == color) {
                    color = colorArray[Math.floor(Math.random() * 7)];
                }

                alreadyDidList[microTime] = [];
                var array = getSeroundingIds(id,microTime);

                colorSeroundings(array,microTime,color);
            });

            function colorSeroundings(array,microTime,color) {
                for (var q = 0; q < array.length; q++) {
                    $("#box" + array[q]).css("background-color", color);    
                }

                var nextArray = [];
                for (var q = 0; q < array.length; q++) {
                    var newArray = (getSeroundingIds(array[q],microTime));
                    for (var y = 0; y < newArray.length; y++) {
                        nextArray.push(newArray[y]);
                    }
                }
                setTimeout(function () {
                    colorSeroundings(squash(nextArray),microTime,color);
                }, 250);
            }

            function squash(arr) {
                var tmp = [];
                for (var i = 0; i < arr.length; i++) {
                    if (tmp.indexOf(arr[i]) == -1) {
                        tmp.push(arr[i]);
                    }
                }
                return tmp;
            }

            function getSeroundingIds(id,microTime) {
                var intArray = [];
                id = id.toString();
                //console.log(id);
                var idSplit = id.split("");
                //console.log(idSplit);
                var idString = id;
                var lastNumber = id.substr(id.length - 1);
                id = parseInt(id);
                console.log(alreadyDidList);

                //left
                var doLeft = false;
                if (id - 1 > -1) {
                    doLeft = true;
                }
                if (idSplit.length > 1) {
                    if (idSplit[1] == 0) {
                        doLeft = false;
                    }
                }
                if (doLeft) {
                    if (alreadyDidList[microTime].indexOf(id - 1) < 0) {
                        intArray.push(id - 1);
                    }
                    
                }
                
                //leftup
                var doLeftUp = false;
                if (id - 11 > -1) {
                    doLeftUp = true;
                }
                var leftUpInt = id - 11;
                leftUpInt = leftUpInt.toString();
                var leftUpLastNumber = leftUpInt.substr(leftUpInt.length - 1);
                if (parseInt(leftUpLastNumber) == 9) {
                    doLeftUp = false;
                }

                if (doLeftUp) {
                    if (alreadyDidList[microTime].indexOf(id - 11) < 0) {
                        intArray.push(id - 11);
                    }
                }
                //up
                if (id - 10 > -1) {
                    if (alreadyDidList[microTime].indexOf(id - 10) < 0) {
                        intArray.push(id - 10);
                    }
                }

                //upright
                var doRightUp = false;
                if (id - 9 > -1) {
                    doRightUp = true;
                }
                if (lastNumber == 9) {
                    doRightUp = false;
                }
                if (doRightUp) {
                    if (alreadyDidList[microTime].indexOf(id - 9) < 0) {
                        intArray.push(id - 9);
                    }
                }
                //right
                var doRight = false;
                if (id +1  < 100) {
                    doRight = true;
                }
                if (lastNumber == 9) {
                    doRight = false;
                }
                if (doRight) {
                    if (alreadyDidList[microTime].indexOf(id + 1) < 0) {
                        intArray.push(id + 1);
                    }
                }
                //rightdown
                var doRightDown = false;
                if (id + 11 < 100) {
                    doRightDown = true;
                }
                if (lastNumber == 9) {
                    doRightDown = false;
                }

                if (doRightDown) {
                    if (alreadyDidList[microTime].indexOf(id + 11) < 0) {
                        intArray.push(id + 11);
                    }
                }
                //down
                if (id + 10 < 100) {
                    if (alreadyDidList[microTime].indexOf(id +10) < 0) {
                        intArray.push(id + 10);
                    }
                }
                //downleft
                var doLeftDown = false;
                if (id + 9 < 100) {
                    doLeftDown = true;
                }
                if (lastNumber == 0) {
                    doLeftDown = false;
                }

                if (doLeftDown) {
                    if (alreadyDidList[microTime].indexOf(id +9) < 0) {
                        intArray.push(id + 9);
                    }
                }

                for (var p = 0; p < intArray.length; p++) {
                    alreadyDidList[microTime].push(intArray[p]);
                }
                alreadyDidList[microTime] = squash(alreadyDidList[microTime]);

                return intArray;
                
            }

        });

        function resetColors() {
            $(".box").css("background-color", "white");
        }
        //var x = 0, y = 1, q = document.getElementsByTagName("div"), timeout = setInterval(function () { x++; x += y; for (var z = 0; z < q.length; z++) { q[z].style.WebkitTransform = "rotate(" + x + "deg)"; } x % 10 == 0 && y++ }, 9);

        //spin
        //var x = 0, y = 1, q = document.getElementsByTagName("*"), timeout = setInterval(function () { x++; x += y; for (var z = 0; z < q.length; z++) { q[z].style.WebkitTransform = "rotate(" + x + "deg)"; } x % 10 == 0 && y++ }, 9);


        //spinDivOnly
        //var x = 0, y = 1, q = document.getElementsByTagName("div"), timeout = setInterval(function () { x++; x += y; for (var z = 0; z < q.length; z++) { q[z].style.WebkitTransform = "rotate(" + x + "deg)"; } x % 10 == 0 && y++ }, 9);


        //textRotation
        //var x=0,y=1,q=document.querySelectorAll("span,p,h1,h2,h3,h4,h5,h6,a,em,wbr");var timeout;var time1;var time2;function doTime(){time1=Math.floor(Math.random()*1000)+500;time2=Math.floor(Math.random()*200)+100;timeout=setInterval(function(){x++;x+=y;for(var z=0;z<q.length;z++){q[z].style.WebkitTransform="rotate("+x+"deg)"}x%10==0&&y++},9);setTimeout(function(){clearInterval(timeout);setTimeout(function(){doTime()},time2)},time1)}doTime();
        
        //textColor
        //var q = document.querySelectorAll("span,p,h1,h2,h3,h4,h5,h6,a,em,wbr");


        //textColorAll
        //var q=document.getElementsByTagName("*"),array=[1,2,3,4,5,6,7,8,9,0,"A","B","C","D","E","F"],timeout=setInterval(function(){for(var a=0;a<q.length;a++){var r="#"+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())];q[a].style.backgroundColor=r,r="#"+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())]+array[Math.floor(17*Math.random())],q[a].style.color=r}},9);
        

        //TextSizeChanger
        //var q = document.querySelectorAll("span,p,h1,h2,h3,h4,h5,h6"); setInterval(function () { for (var a = 0; a < q.length; a++) { var r = Math.floor(50 * Math.random()) + 1 + "px"; console.log(r); q[a].style.fontSize = r } }, 500);


        /*var q = document.querySelectorAll("span,p,h1,h2,h3,h4,h5,h6");
        setInterval(function () {
            for (var a = 0; a < q.length; a++) {
               
                var r = Math.floor(50 * Math.random()) + 1 + "px";
                console.log(r);
                q[a].style.fontSize = r;
            }
        }, 500);*/

        //rotateDivOneByOne
        /*var q = document.getElementsByTagName("div");
        var timeout;
        function spinElement(a) {
            var x = 0;
            console.log('qwe');
            timeout = setInterval(function () {
                console.log(x);
                x = x + 10;
                q[a].style.WebkitTransform = "rotate(" + x + "deg)";
                if (x == 360) {
                    clearInterval(timeout);
                    if (a != q.length - 1) {
                        spinElement(a+1);
                    }
                }
            }, 1);
        }
        spinElement(0);*/
        

    </script>

    <p style="max-width:270px;" id="mainDiv"></p>
    
</body>
</html>

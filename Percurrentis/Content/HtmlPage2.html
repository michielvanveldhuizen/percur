<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-latest.min.js"
            type="text/javascript"></script>
</head>
<body>
    <div id="mainBox" style="width:100%;height:50px;border:1px solid #000000">
        <div id="innerBox" style="background-color:blue;height:100%;"></div>
    </div>
    <center id="text">asd</center>
    <center id="text2"></center>
    <center id="text3"></center>
    <center>
        <div id="clockBox" style="border:1px solid #000000;width:100px;height:100px;">
            <div id="hoursPointer" style="width:3px;height:100px;margin-left:50px;position:absolute;">
                <div style="height:20%;"></div>
                <div style="background-color:red;height:30%;"></div>
            </div>
            <div id="minutesPointer" style="width:2px;height:100px;margin-left:50px;position:absolute;">
                <div style="height:10%;"></div>
                <div style="background-color:blue;height:40%;"></div>
            </div>
            <div id="secondPointer" style="width:1px;height:100px;margin-left:50px;position:absolute;">
                <div style="background-color:black;height:50%;"></div>
            </div>
        </div>
    </center>

    <script type="text/javascript">
        $(document).ready(function () {
            function dingen() {
                var totalMircsec = 30600000;

                var dEnd = new Date();
                dEnd.setHours(16, 30, 0, 0);

                var dNow = new Date();

                var diff = dEnd.getTime() - dNow.getTime();

                var percent = ((totalMircsec - diff) / totalMircsec) * 100;

                var mainBoxWidth = $("#mainBox").css("width");

                var mainBoxWidth = mainBoxWidth.substring(0, mainBoxWidth.length - 2);

                var percentInWidth = (mainBoxWidth / 100) * percent;
                $("#innerBox").css("width", percentInWidth + "px");
                $("#text").html(percent.toString().substring(0, 5) + "%");

                var totalSeconds = diff / 1000;

                var hours = Math.floor(totalSeconds / 3600);
                totalSeconds %= 3600;
                var minutes = Math.floor(totalSeconds / 60);
                seconds = totalSeconds % 60;

                seconds = Math.round(seconds);
                if (seconds < 10) {
                    seconds = "0" + seconds;
                }

                if (minutes < 10) {
                    minutes = "0" + minutes;
                }
                var hourDeg = ((dNow.getHours() * 12 * 60) + (dNow.getMinutes() * 60) + dNow.getSeconds()) * 0.0083333333333333;
                hourDeg = (dNow.getSeconds() + (dNow.getMinutes() * 60) + (dNow.getHours() * 60 * 60)) * 0.0083333333333333;

                $("#secondPointer").css("-webkit-transform", "rotate(" + dNow.getSeconds() * 6 + "deg)");
                $("#minutesPointer").css("-webkit-transform", "rotate(" + (dNow.getMinutes() * 60 + dNow.getSeconds()) * 0.1 + "deg)");
                $("#hoursPointer").css("-webkit-transform", "rotate(" + hourDeg + "deg)");

                $("#text2").html("Time left:" + hours + ":" + minutes + ":" + seconds);

                $("#text3").html(dNow.toLocaleTimeString());
            }
            
            

            dingen();

            var interval = setInterval(function () {
                dingen();
            }, 1000);
        });
    </script>
</body>
</html>
